description: >
  This command echos "Hello World" using file inclusion.
# What will this command do?
# Descriptions should be short, simple, and clear.
parameters:
  path:
    type: string
    description: "Path of your app binary"
steps:
  - store_artifacts:
      path: <<parameters.path>>
  - run:
      name: Get $ARTIFACT_URL
      command: |
        project_slug=$(echo "$CIRCLE_BUILD_URL" | sed -e "s|https://circleci.com/%7C%7Cg" -e "s|/[0-9]*$||g")
        artifacts=$(curl -X GET "https://circleci.com/api/v2/project/$project_slug/$CIRCLE_BUILD_NUM/artifacts" \
        -H "Accept: application/json" \
        -u "$CIRCLE_API_TOKEN:")
        echo "export ARTIFACT_URL=$(echo $artifacts | jq '.items[0].url')" >> $BASH_ENV
  - run: echo $ARTIFACT_URL
